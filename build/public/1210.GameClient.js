"use strict";(self.webpackChunkGameClient=self.webpackChunkGameClient||[]).push([[1210],{1210:(e,t,n)=>{n.d(t,{KHR_animation_pointer:()=>d});var r=n(3039),s=n(6618),i=n(5354),a=n(451);function o(e,t,n,r){return a.v9.FromArray(t,n).scale(r)}function T(e,t,n,r){return t[n]*r}function _(e,t,n,r){return-t[n]*r}function u(e,t,n,r){return t[n+1]*r}function c(e,t,n,r){return t[n]*r*2}function l(e){return{scale:[new m(s.X5.ANIMATIONTYPE_FLOAT,`${e}.uScale`,T,(()=>2)),new m(s.X5.ANIMATIONTYPE_FLOAT,`${e}.vScale`,u,(()=>2))],offset:[new m(s.X5.ANIMATIONTYPE_FLOAT,`${e}.uOffset`,T,(()=>2)),new m(s.X5.ANIMATIONTYPE_FLOAT,`${e}.vOffset`,u,(()=>2))],rotation:[new m(s.X5.ANIMATIONTYPE_FLOAT,`${e}.wAng`,_,(()=>1))]}}class A extends i.GM{buildAnimations(e,t,n,r,s){s(e._babylonCamera,this._buildAnimation(t,n,r))}}class m extends i.GM{buildAnimations(e,t,n,r,s){for(const i in e._data)s(e._data[i].babylonMaterial,this._buildAnimation(t,n,r))}}class O extends i.GM{buildAnimations(e,t,n,r,s){s(e._babylonLight,this._buildAnimation(t,n,r))}}const I={__array__:{__target__:!0,...i.xm}},h={__array__:{__target__:!0,orthographic:{xmag:[new A(s.X5.ANIMATIONTYPE_FLOAT,"orthoLeft",_,(()=>1)),new A(s.X5.ANIMATIONTYPE_FLOAT,"orthoRight",u,(()=>1))],ymag:[new A(s.X5.ANIMATIONTYPE_FLOAT,"orthoBottom",_,(()=>1)),new A(s.X5.ANIMATIONTYPE_FLOAT,"orthoTop",u,(()=>1))],zfar:[new A(s.X5.ANIMATIONTYPE_FLOAT,"maxZ",T,(()=>1))],znear:[new A(s.X5.ANIMATIONTYPE_FLOAT,"minZ",T,(()=>1))]},perspective:{yfov:[new A(s.X5.ANIMATIONTYPE_FLOAT,"fov",T,(()=>1))],zfar:[new A(s.X5.ANIMATIONTYPE_FLOAT,"maxZ",T,(()=>1))],znear:[new A(s.X5.ANIMATIONTYPE_FLOAT,"minZ",T,(()=>1))]}}},N={nodes:I,materials:{__array__:{__target__:!0,pbrMetallicRoughness:{baseColorFactor:[new m(s.X5.ANIMATIONTYPE_COLOR3,"albedoColor",o,(()=>4)),new m(s.X5.ANIMATIONTYPE_FLOAT,"alpha",(function(e,t,n,r){return t[n+3]*r}),(()=>4))],metallicFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"metallic",T,(()=>1))],roughnessFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"roughness",T,(()=>1))],baseColorTexture:{extensions:{KHR_texture_transform:l("albedoTexture")}},metallicRoughnessTexture:{extensions:{KHR_texture_transform:l("metallicTexture")}}},emissiveFactor:[new m(s.X5.ANIMATIONTYPE_COLOR3,"emissiveColor",o,(()=>3))],normalTexture:{scale:[new m(s.X5.ANIMATIONTYPE_FLOAT,"bumpTexture.level",T,(()=>1))],extensions:{KHR_texture_transform:l("bumpTexture")}},occlusionTexture:{strength:[new m(s.X5.ANIMATIONTYPE_FLOAT,"ambientTextureStrength",T,(()=>1))],extensions:{KHR_texture_transform:l("ambientTexture")}},emissiveTexture:{extensions:{KHR_texture_transform:l("emissiveTexture")}},extensions:{KHR_materials_anisotropy:{anisotropyStrength:[new m(s.X5.ANIMATIONTYPE_FLOAT,"anisotropy.intensity",T,(()=>1))],anisotropyRotation:[new m(s.X5.ANIMATIONTYPE_FLOAT,"anisotropy.angle",T,(()=>1))],anisotropyTexture:{extensions:{KHR_texture_transform:l("anisotropy.texture")}}},KHR_materials_clearcoat:{clearcoatFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"clearCoat.intensity",T,(()=>1))],clearcoatRoughnessFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"clearCoat.roughness",T,(()=>1))],clearcoatTexture:{extensions:{KHR_texture_transform:l("clearCoat.texture")}},clearcoatNormalTexture:{scale:[new m(s.X5.ANIMATIONTYPE_FLOAT,"clearCoat.bumpTexture.level",T,(()=>1))],extensions:{KHR_texture_transform:l("clearCoat.bumpTexture")}},clearcoatRoughnessTexture:{extensions:{KHR_texture_transform:l("clearCoat.textureRoughness")}}},KHR_materials_dispersion:{dispersion:[new m(s.X5.ANIMATIONTYPE_FLOAT,"subSurface.dispersion",T,(()=>1))]},KHR_materials_emissive_strength:{emissiveStrength:[new m(s.X5.ANIMATIONTYPE_FLOAT,"emissiveIntensity",T,(()=>1))]},KHR_materials_ior:{ior:[new m(s.X5.ANIMATIONTYPE_FLOAT,"indexOfRefraction",T,(()=>1))]},KHR_materials_iridescence:{iridescenceFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"iridescence.intensity",T,(()=>1))],iridescenceIor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"iridescence.indexOfRefraction",T,(()=>1))],iridescenceThicknessMinimum:[new m(s.X5.ANIMATIONTYPE_FLOAT,"iridescence.minimumThickness",T,(()=>1))],iridescenceThicknessMaximum:[new m(s.X5.ANIMATIONTYPE_FLOAT,"iridescence.maximumThickness",T,(()=>1))],iridescenceTexture:{extensions:{KHR_texture_transform:l("iridescence.texture")}},iridescenceThicknessTexture:{extensions:{KHR_texture_transform:l("iridescence.thicknessTexture")}}},KHR_materials_sheen:{sheenColorFactor:[new m(s.X5.ANIMATIONTYPE_COLOR3,"sheen.color",o,(()=>3))],sheenRoughnessFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"sheen.roughness",T,(()=>1))],sheenColorTexture:{extensions:{KHR_texture_transform:l("sheen.texture")}},sheenRoughnessTexture:{extensions:{KHR_texture_transform:l("sheen.textureRoughness")}}},KHR_materials_specular:{specularFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"metallicF0Factor",T,(()=>1))],specularColorFactor:[new m(s.X5.ANIMATIONTYPE_COLOR3,"metallicReflectanceColor",o,(()=>3))],specularTexture:{extensions:{KHR_texture_transform:l("metallicReflectanceTexture")}},specularColorTexture:{extensions:{KHR_texture_transform:l("reflectanceTexture")}}},KHR_materials_transmission:{transmissionFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"subSurface.refractionIntensity",T,(()=>1))],transmissionTexture:{extensions:{KHR_texture_transform:l("subSurface.refractionIntensityTexture")}}},KHR_materials_volume:{attenuationColor:[new m(s.X5.ANIMATIONTYPE_COLOR3,"subSurface.tintColor",o,(()=>3))],attenuationDistance:[new m(s.X5.ANIMATIONTYPE_FLOAT,"subSurface.tintColorAtDistance",T,(()=>1))],thicknessFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"subSurface.maximumThickness",T,(()=>1))],thicknessTexture:{extensions:{KHR_texture_transform:l("subSurface.thicknessTexture")}}},KHR_materials_diffuse_transmission:{diffuseTransmissionFactor:[new m(s.X5.ANIMATIONTYPE_FLOAT,"subSurface.translucencyIntensity",T,(()=>1))],diffuseTransmissionTexture:{extensions:{KHR_texture_transform:l("subSurface.translucencyIntensityTexture")}},diffuseTransmissionColorFactor:[new m(s.X5.ANIMATIONTYPE_COLOR3,"subSurface.translucencyColor",o,(()=>3))],diffuseTransmissionColorTexture:{extensions:{KHR_texture_transform:l("subSurface.translucencyColorTexture")}}}}}},cameras:h,extensions:{KHR_lights_punctual:{lights:{__array__:{__target__:!0,color:[new O(s.X5.ANIMATIONTYPE_COLOR3,"diffuse",o,(()=>3))],intensity:[new O(s.X5.ANIMATIONTYPE_FLOAT,"intensity",T,(()=>1))],range:[new O(s.X5.ANIMATIONTYPE_FLOAT,"range",T,(()=>1))],spot:{innerConeAngle:[new O(s.X5.ANIMATIONTYPE_FLOAT,"innerAngle",c,(()=>1))],outerConeAngle:[new O(s.X5.ANIMATIONTYPE_FLOAT,"angle",c,(()=>1))]}}}},EXT_lights_ies:{lights:{__array__:{__target__:!0,color:[new O(s.X5.ANIMATIONTYPE_COLOR3,"diffuse",o,(()=>3))],multiplier:[new O(s.X5.ANIMATIONTYPE_FLOAT,"intensity",T,(()=>1))]}}}}};var f=n(3150),x=n(9046);const g="KHR_animation_pointer";class w extends f.z{constructor(e){super(e,N)}}class d{constructor(e){this.name=g,this._loader=e,this._pathToObjectConverter=new w(this._loader.gltf)}get enabled(){return this._loader.isExtensionUsed(g)}dispose(){this._loader=null,delete this._pathToObjectConverter}_loadAnimationChannelAsync(e,t,n,s,i){const a=s.target.extensions?.KHR_animation_pointer;if(!a||!this._pathToObjectConverter)return null;"pointer"!==s.target.path&&r.V.Warn(`${e}/target/path: Value (${s.target.path}) must be (pointer) when using the ${this.name} extension`),null!=s.target.node&&r.V.Warn(`${e}/target/node: Value (${s.target.node}) must not be present when using the ${this.name} extension`);const o=`${e}/extensions/${this.name}`,T=a.pointer;if(!T)throw new Error(`${o}: Pointer is missing`);try{const r=this._pathToObjectConverter.convert(T);return this._loader._loadAnimationChannelFromTargetInfoAsync(e,t,n,s,r,i)}catch(e){return r.V.Warn(`${o}/pointer: Invalid pointer (${T}) skipped`),null}}}(0,x.Hg)(g),(0,x.Ye)(g,!0,(e=>new d(e)))},3150:(e,t,n)=>{n.d(t,{z:()=>r});class r{constructor(e,t){this._gltf=e,this._infoTree=t}convert(e){let t,n=this._gltf,r=this._infoTree;if(!e.startsWith("/"))throw new Error("Path must start with a /");const s=e.split("/");s.shift();for(const i of s){if(r.__array__)r=r.__array__;else if(r=r[i],!r)throw new Error(`Path ${e} is invalid`);if(void 0===n)throw new Error(`Path ${e} is invalid`);n=n[i],r.__target__&&(t=n)}return{object:t,info:r}}}},5354:(e,t,n)=>{n.d(t,{GM:()=>a,xm:()=>T});var r=n(6618),s=n(4049);function i(e,t,n,r){return s.Pq.FromArray(t,n).scaleInPlace(r)}class a{constructor(e,t,n,r){this.type=e,this.name=t,this.getValue=n,this.getStride=r}_buildAnimation(e,t,n){const s=new r.X5(e,this.name,t,this.type);return s.setKeys(n),s}}class o extends a{buildAnimations(e,t,n,r,s){s(e._babylonTransformNode,this._buildAnimation(t,n,r))}}const T={translation:[new o(r.X5.ANIMATIONTYPE_VECTOR3,"position",i,(()=>3))],rotation:[new o(r.X5.ANIMATIONTYPE_QUATERNION,"rotationQuaternion",(function(e,t,n,r){return s.PT.FromArray(t,n).scaleInPlace(r)}),(()=>4))],scale:[new o(r.X5.ANIMATIONTYPE_VECTOR3,"scaling",i,(()=>3))],weights:[new class extends a{buildAnimations(e,t,n,s,i){if(e._numMorphTargets)for(let a=0;a<e._numMorphTargets;a++){const o=new r.X5(`${t}_${a}`,this.name,n,this.type);if(o.setKeys(s.map((e=>({frame:e.frame,inTangent:e.inTangent?e.inTangent[a]:void 0,value:e.value[a],outTangent:e.outTangent?e.outTangent[a]:void 0,interpolation:e.interpolation})))),e._primitiveBabylonMeshes)for(const t of e._primitiveBabylonMeshes)if(t.morphTargetManager){const e=t.morphTargetManager.getTarget(a),n=o.clone();e.animations.push(n),i(e,n)}}}}(r.X5.ANIMATIONTYPE_FLOAT,"influence",(function(e,t,n,r){const s=new Array(e._numMorphTargets);for(let e=0;e<s.length;e++)s[e]=t[n++]*r;return s}),(e=>e._numMorphTargets))]}}}]);