"use strict";(self.webpackChunkGameClient=self.webpackChunkGameClient||[]).push([[8039],{8039:(e,s,r)=>{r.d(s,{KHR_materials_pbrSpecularGlossiness:()=>n});var a=r(451),l=r(6486),t=r(67),o=r(9046);const i="KHR_materials_pbrSpecularGlossiness";class n{constructor(e){this.name=i,this.order=200,this._loader=e,this.enabled=this._loader.isExtensionUsed(i)}dispose(){this._loader=null}loadMaterialPropertiesAsync(e,s,r){return t.BT.LoadExtensionAsync(e,s,this.name,((a,l)=>{const t=new Array;return t.push(this._loader.loadMaterialBasePropertiesAsync(e,s,r)),t.push(this._loadSpecularGlossinessPropertiesAsync(a,l,r)),this._loader.loadMaterialAlphaProperties(e,s,r),Promise.all(t).then((()=>{}))}))}_loadSpecularGlossinessPropertiesAsync(e,s,r){if(!(r instanceof l.Y))throw new Error(`${e}: Material type not supported`);const t=new Array;return r.metallic=null,r.roughness=null,s.diffuseFactor?(r.albedoColor=a.v9.FromArray(s.diffuseFactor),r.alpha=s.diffuseFactor[3]):r.albedoColor=a.v9.White(),r.reflectivityColor=s.specularFactor?a.v9.FromArray(s.specularFactor):a.v9.White(),r.microSurface=null==s.glossinessFactor?1:s.glossinessFactor,s.diffuseTexture&&t.push(this._loader.loadTextureInfoAsync(`${e}/diffuseTexture`,s.diffuseTexture,(e=>{e.name=`${r.name} (Diffuse)`,r.albedoTexture=e}))),s.specularGlossinessTexture&&(t.push(this._loader.loadTextureInfoAsync(`${e}/specularGlossinessTexture`,s.specularGlossinessTexture,(e=>{e.name=`${r.name} (Specular Glossiness)`,r.reflectivityTexture=e,r.reflectivityTexture.hasAlpha=!0}))),r.useMicroSurfaceFromReflectivityMapAlpha=!0),Promise.all(t).then((()=>{}))}}(0,o.Hg)(i),(0,o.Ye)(i,!0,(e=>new n(e)))}}]);