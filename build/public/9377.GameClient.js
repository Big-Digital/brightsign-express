"use strict";(self.webpackChunkGameClient=self.webpackChunkGameClient||[]).push([[9377],{9377:(s,e,r)=>{r.d(e,{KHR_materials_diffuse_transmission:()=>u});var n=r(6486),a=r(67),i=r(451),o=r(9046);const t="KHR_materials_diffuse_transmission";class u{constructor(s){this.name=t,this.order=174,this._loader=s,this.enabled=this._loader.isExtensionUsed(t),this.enabled&&(s.parent.transparencyAsCoverage=!0)}dispose(){this._loader=null}loadMaterialPropertiesAsync(s,e,r){return a.BT.LoadExtensionAsync(s,e,this.name,((n,a)=>{const i=new Array;return i.push(this._loader.loadMaterialPropertiesAsync(s,e,r)),i.push(this._loadTranslucentPropertiesAsync(n,e,r,a)),Promise.all(i).then((()=>{}))}))}_loadTranslucentPropertiesAsync(s,e,r,a){if(!(r instanceof n.Y))throw new Error(`${s}: Material type not supported`);const o=r;if(o.subSurface.isTranslucencyEnabled=!0,o.subSurface.volumeIndexOfRefraction=1,o.subSurface.minimumThickness=0,o.subSurface.maximumThickness=0,o.subSurface.useAlbedoToTintTranslucency=!1,void 0===a.diffuseTransmissionFactor)return o.subSurface.translucencyIntensity=0,o.subSurface.isTranslucencyEnabled=!1,Promise.resolve();o.subSurface.translucencyIntensity=a.diffuseTransmissionFactor;const t=new Array;return o.subSurface.useGltfStyleTextures=!0,a.diffuseTransmissionTexture&&(a.diffuseTransmissionTexture.nonColorData=!0,t.push(this._loader.loadTextureInfoAsync(`${s}/diffuseTransmissionTexture`,a.diffuseTransmissionTexture).then((s=>{s.name=`${r.name} (Diffuse Transmission)`,o.subSurface.translucencyIntensityTexture=s})))),void 0!==a.diffuseTransmissionColorFactor?o.subSurface.translucencyColor=i.v9.FromArray(a.diffuseTransmissionColorFactor):o.subSurface.translucencyColor=i.v9.White(),a.diffuseTransmissionColorTexture&&t.push(this._loader.loadTextureInfoAsync(`${s}/diffuseTransmissionColorTexture`,a.diffuseTransmissionColorTexture).then((s=>{s.name=`${r.name} (Diffuse Transmission Color)`,o.subSurface.translucencyColorTexture=s}))),Promise.all(t).then((()=>{}))}}(0,o.Hg)(t),(0,o.Ye)(t,!0,(s=>new u(s)))}}]);